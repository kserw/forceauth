# ForceAuth Dashboard - Server Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Core Settings
# =============================================================================

# Server port (default: 3001)
PORT=3001

# Frontend URL for CORS and OAuth redirects
FRONTEND_URL=http://localhost:5173

# Node environment (development or production)
NODE_ENV=development

# =============================================================================
# Database (PostgreSQL)
# =============================================================================

# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://localhost:5432/forceauth

# Legacy SQLite path (for migration reference)
# DB_PATH=/path/to/forceauth.db

# Development: Set to 'true' to wipe orgs/sessions on server restart
# WIPE_DB_ON_START=true

# =============================================================================
# Security Secrets (REQUIRED in production)
# =============================================================================

# Session encryption secret (min 32 characters)
SESSION_SECRET=change-this-to-a-random-string

# CSRF token signing secret (auto-generated if not set)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# CSRF_SECRET=your-csrf-secret-64-chars-recommended

# Cookie signing secret (auto-generated if not set)
# COOKIE_SECRET=your-cookie-secret-64-chars-recommended

# Token encryption key (64 hex characters = 32 bytes)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# TOKEN_ENCRYPTION_KEY=your-64-character-hex-encryption-key-here

# =============================================================================
# Rate Limiting
# =============================================================================

# Rate limit window in milliseconds (default: 60000 = 1 minute)
# RATE_LIMIT_WINDOW_MS=60000

# Max requests per window for general endpoints (default: 100)
# RATE_LIMIT_MAX_REQUESTS=100

# Max requests per window for auth endpoints (default: 5)
# RATE_LIMIT_AUTH_MAX=5

# Max requests per window for API endpoints per user (default: 30)
# RATE_LIMIT_API_MAX=30

# =============================================================================
# Session Configuration
# =============================================================================

# Session max age in milliseconds (default: 14400000 = 4 hours)
# SESSION_MAX_AGE_MS=14400000

# Session cleanup interval in milliseconds (default: 900000 = 15 minutes)
# SESSION_CLEANUP_INTERVAL_MS=900000

# =============================================================================
# OAuth Configuration
# =============================================================================

# OAuth state expiry in milliseconds (default: 600000 = 10 minutes)
# OAUTH_STATE_EXPIRY_MS=600000

# =============================================================================
# Salesforce OAuth Credentials
# =============================================================================

# Salesforce Production
SF_PROD_CLIENT_ID=your-production-connected-app-client-id
SF_PROD_CLIENT_SECRET=your-production-connected-app-client-secret
SF_PROD_REDIRECT_URI=http://localhost:3001/api/auth/callback

# Salesforce Sandbox
SF_SANDBOX_CLIENT_ID=your-sandbox-connected-app-client-id
SF_SANDBOX_CLIENT_SECRET=your-sandbox-connected-app-client-secret
SF_SANDBOX_REDIRECT_URI=http://localhost:3001/api/auth/callback

# =============================================================================
# Railway/Production Deployment
# =============================================================================
# When deploying to Railway or similar, set these environment variables:
#
# Required:
#   NODE_ENV=production
#   DATABASE_URL=postgresql://user:pass@host:5432/forceauth
#   SESSION_SECRET=<generate-a-secure-random-string>
#   CSRF_SECRET=<generate-a-secure-random-string>
#   COOKIE_SECRET=<generate-a-secure-random-string>
#   TOKEN_ENCRYPTION_KEY=<64-hex-characters>
#
# For Salesforce OAuth (update redirect URIs to your domain):
#   SF_PROD_REDIRECT_URI=https://your-app.railway.app/api/auth/callback
#   SF_SANDBOX_REDIRECT_URI=https://your-app.railway.app/api/auth/callback
#
# Note: PORT is automatically set by most platforms
# Note: FRONTEND_URL should match your deployment URL in production
